(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/new_order/new_order"],{"02bb":function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={components:{},data:function(){return{items:["新订单","待配送","催单"],height:"",current:0,orders:"",top:"",latitude:"",longitude:"",tg:!0,opens:-1,merchantId:"",wait_orders:""}},onLoad:function(){var e=this;t.getStorage({key:"userinfo",success:function(t){e.merchantId=t.data.id,e.load_newOrders(),e.wait_delivery(),e.reminder()}})},onReady:function(){this.getTopheight()},onShow:function(){},onPullDownRefresh:function(){this.load_newOrders(),setTimeout(function(){t.stopPullDownRefresh()},1e3)},methods:{getTopheight:function(){var e=this;t.getSystemInfo({success:function(t){e.top="65px",e.height=t.statusBarHeight+44+"px"}})},onTap:function(t){this.current!=t&&(this.current=t),0==t&&this.load_newOrders(),1==t&&this.wait_delivery()},load_newOrders:function(){var e=this;t.request({url:this.serveipd+"/api/merchant/order/newOrders",method:"GET",data:{merchantId:e.merchantId},success:function(t){e.orders=t.data.data},fail:function(){},complete:function(){}})},wait_delivery:function(){var e=this;t.request({url:e.serveipd+"/api/merchant/order/delivery",method:"GET",data:{merchantId:e.merchantId},success:function(t){e.wait_orders=t.data.data},fail:function(){},complete:function(){}})},reminder:function(){var e=this;t.request({url:e.serveipd+"/api/merchant/order/merchantNews",method:"GET",data:{merchantId:e.merchantId},success:function(t){console.log(t)}})},wz:function(e,s){t.openLocation({latitude:e,longitude:s,success:function(){}})},dh:function(e){t.makePhoneCall({phoneNumber:e,success:function(t){}})},open:function(t){this.tg=!this.tg,this.opens!=t?this.opens=t:this.opens=-1},receive:function(e){var s=this;t.request({url:this.serveipd+"/api/merchant/order/newOrder",method:"GET",data:{orderno:e,merchantId:s.merchantId},success:function(e){t.showToast({title:e.data.msg,duration:2e3}),s.load_newOrders(),s.wait_delivery()}})},confirm:function(e){var s=this;t.request({url:this.serveipd+"/api/merchant/order/confirmDelivery",method:"GET",data:{orderno:e},success:function(e){t.showToast({title:e.data.msg,duration:2e3}),s.wait_delivery()}})}}};e.default=s}).call(this,s("6e42")["default"])},"14c0":function(t,e,s){},"249c":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",[s("view",{staticClass:"navigation",style:{height:t.height}},[s("text",[t._v("鲁西肥牛")])]),s("view",{staticClass:"content",style:{paddingTop:t.height}},[s("view",{staticClass:"segmented"},t._l(t.items,function(e,a){return s("view",{key:a,staticClass:"tab_list",class:{active:t.current===a},attrs:{eventid:"3c09a86b-0-"+a},on:{tap:function(e){t.onTap(a)}}},[t._v(t._s(e))])})),s("view",{staticClass:"segmented_box",style:{marginTop:t.top}},[s("view",{directives:[{name:"show",rawName:"v-show",value:0===t.current,expression:"current === 0"}],attrs:{"scroll-y":"true"}},t._l(t.orders,function(e,a){return s("view",{key:e.id,staticClass:"order_list"},[s("view",{staticClass:"top"},[s("text",[s("text",{staticClass:"num"},[t._v(t._s(t.orders.length-a))]),""!=e.expectTime?s("text",{staticClass:"hope"},[t._v("期望"+t._s(e.expectTime)+"送达")]):t._e()]),s("text",{staticClass:"state"},[t._v("等待接单")])]),s("view",{staticClass:"infor"},[s("text",{staticClass:"name"},[t._v(t._s(e.consigneeName))]),s("text",{staticClass:"order_number"},[t._v(t._s(e.orderno))]),s("text",{staticClass:"address"},[t._v(t._s(e.consigneeAddress))]),s("view",{staticClass:"right_btn"},[s("image",{staticClass:"wz",attrs:{src:"../../static/new_order/wz.png",mode:"",eventid:"3c09a86b-1-"+a},on:{tap:function(s){t.wz(e.dlatitude,e.dlongitude)}}}),s("image",{staticClass:"dh",attrs:{src:"../../static/new_order/dh.png",mode:"",eventid:"3c09a86b-2-"+a},on:{tap:function(s){t.dh(e.consigneePhone)}}})])]),s("view",{staticClass:"commodity"},[s("view",{staticClass:"commodity_list"},[s("text",{staticClass:"much"},[t._v("商品("+t._s(e.orderDetails.length)+")")]),s("view",{staticClass:"open",attrs:{eventid:"3c09a86b-3-"+a},on:{tap:function(e){t.open(a)}}},[s("text",[t._v("展开")]),s("image",{staticClass:"rotate",class:{rotate_start:a==t.opens},attrs:{src:"../../static/new_order/down.png",mode:""}})])]),a==t.opens?s("view",{staticClass:"sp_list"},t._l(e.orderDetails,function(e,a){return s("view",{key:a,staticClass:"sp_list_infor"},[s("text",{staticClass:"name"},[t._v(t._s(e.name))]),s("view",{staticClass:"right"},[s("text",{staticClass:"number"},[t._v("X"+t._s(e.number))]),s("text",{staticClass:"money"},[t._v("￥"+t._s(e.singlePrice))])])])})):t._e()]),s("view",{staticClass:"remark"},[s("text",{staticClass:"remark_text"},[t._v("备注")]),s("text",{staticClass:"ask"},[t._v(t._s(e.remark))])]),s("view",{staticClass:"bottom"},[s("view",[s("text",{staticClass:"income"},[t._v("本单收入")]),s("text",{staticClass:"money"},[t._v("￥"+t._s(e.income))])]),s("text",{staticClass:"receive",attrs:{eventid:"3c09a86b-4-"+a},on:{tap:function(s){t.receive(e.orderno)}}},[t._v("立即接单")])])])})),s("view",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current === 1"}],attrs:{"scroll-y":"true"}},t._l(t.wait_orders,function(e,a){return s("view",{key:e.id,staticClass:"order_list"},[s("view",{staticClass:"top"},[s("text",[s("text",{staticClass:"num"},[t._v(t._s(t.wait_orders.length-a))]),""!=e.expectTime?s("text",{staticClass:"hope"},[t._v("期望"+t._s(e.expectTime)+"送达")]):t._e()]),s("text",{staticClass:"state"},[t._v("已接单")])]),s("view",{staticClass:"infor"},[s("text",{staticClass:"name"},[t._v(t._s(e.consigneeName))]),s("text",{staticClass:"order_number"},[t._v(t._s(e.orderno))]),s("text",{staticClass:"address"},[t._v(t._s(e.consigneeAddress))]),s("view",{staticClass:"right_btn"},[s("image",{staticClass:"wz",attrs:{src:"../../static/new_order/wz.png",mode:"",eventid:"3c09a86b-5-"+a},on:{tap:function(s){t.wz(e.dlatitude,e.dlongitude)}}}),s("image",{staticClass:"dh",attrs:{src:"../../static/new_order/dh.png",mode:"",eventid:"3c09a86b-6-"+a},on:{tap:function(s){t.dh(e.consigneePhone)}}})])]),s("view",{staticClass:"commodity"},[s("view",{staticClass:"commodity_list"},[s("text",{staticClass:"much"},[t._v("商品("+t._s(e.orderDetails.length)+")")]),s("view",{staticClass:"open",attrs:{eventid:"3c09a86b-7-"+a},on:{tap:function(e){t.open(a)}}},[s("text",[t._v("展开")]),s("image",{staticClass:"rotate",class:{rotate_start:a==t.opens},attrs:{src:"../../static/new_order/down.png",mode:""}})])]),a==t.opens?s("view",{staticClass:"sp_list"},t._l(e.orderDetails,function(e,a){return s("view",{key:a,staticClass:"sp_list_infor"},[s("text",{staticClass:"name"},[t._v(t._s(e.name))]),s("view",{staticClass:"right"},[s("text",{staticClass:"number"},[t._v("X"+t._s(e.number))]),s("text",{staticClass:"money"},[t._v("￥"+t._s(e.singlePrice))])])])})):t._e()]),s("view",{staticClass:"remark"},[s("text",{staticClass:"remark_text"},[t._v("备注")]),s("text",{staticClass:"ask"},[t._v(t._s(e.remark))])]),s("view",{staticClass:"bottom"},[s("view",[s("text",{staticClass:"income"},[t._v("本单收入")]),s("text",{staticClass:"money"},[t._v("￥"+t._s(e.income))])]),s("text",{staticClass:"receive",attrs:{eventid:"3c09a86b-8-"+a},on:{tap:function(s){t.confirm(e.orderno)}}},[t._v("确认配送")])])])})),s("view",{directives:[{name:"show",rawName:"v-show",value:2===t.current,expression:"current === 2"}],attrs:{"scroll-y":"true"}})])])])},i=[];s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i})},"24cc":function(t,e,s){"use strict";var a=s("14c0"),i=s.n(a);i.a},3831:function(t,e,s){"use strict";s.r(e);var a=s("249c"),i=s("a6f1");for(var n in i)"default"!==n&&function(t){s.d(e,t,function(){return i[t]})}(n);s("24cc");var r=s("2877"),o=Object(r["a"])(i["default"],a["a"],a["b"],!1,null,null,null);e["default"]=o.exports},"3ddd":function(t,e,s){"use strict";s("b007");var a=n(s("b0ce")),i=n(s("3831"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(i.default))},a6f1:function(t,e,s){"use strict";s.r(e);var a=s("02bb"),i=s.n(a);for(var n in a)"default"!==n&&function(t){s.d(e,t,function(){return a[t]})}(n);e["default"]=i.a}},[["3ddd","common/runtime","common/vendor"]]]);