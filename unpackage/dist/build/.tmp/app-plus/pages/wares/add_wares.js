(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/wares/add_wares"],{"3e3f":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{height:"",permitPic:"",Licence:"",norms_list:[],norms:"",tg:"none",norms_list_a:[],attribute:"点击选择属性",merchantId:"",sort:[],index:0,sort_name:"",id:"",id_list:[],price:"",company:"",stock:"",content:"",change_v:1,default_sort:{sort_name:"",id:"",index:0}}},onLoad:function(){var e=this;t.getStorage({key:"userinfo",success:function(t){e.merchantId=t.data.id,e.choice()}}),t.getStorage({key:"default_sort",success:function(t){e.default_sort.id=t.data.default_sort.id,e.default_sort.sort_name=t.data.default_sort.sort_name}})},onReady:function(){this.getTopheight()},methods:{getTopheight:function(){var e=this;t.getSystemInfo({success:function(t){e.height=t.statusBarHeight+44+"px"}})},change:function(t){t.detail.value?this.change_v=1:this.change_v=0,console.log(this.change_v)},add_wares:function(){var e=this;t.chooseImage({count:1,sizeconfirmtype:["original","compressed"],success:function(a){var s=a.tempFiles;e.Licence=s[0].path,t.uploadFile({url:e.serveipd+"/ajax/upfile",filePath:s[0].path,name:"upfile",formData:{},success:function(t){e.permitPic=parseInt(JSON.parse(t.data).id)}})}})},add_norms:function(){this.tg="block",this.norms_list=[],this.norms_list_a=[]},add_norms_label:function(){""!=this.norms&&(this.norms_list.push(this.norms),this.norms="")},determine:function(){this.norms_list_a=this.norms_list,this.tg="none"},cancel:function(){this.tg="none",this.norms_list=[],this.norms_list_a=[]},choice:function(){var e=this;t.request({url:e.serveipd+"/api/merchantApi/categories",method:"GET",data:{merchantId:e.merchantId},success:function(t){console.log(t);for(var a=0;a<t.data.data.length;a++)e.sort.push(t.data.data[a].name),e.id_list.push(t.data.data[a].id)}})},sort_list:function(e){var a=this;a.default_sort.index=e.detail.value,a.default_sort.sort_name=a.sort[a.default_sort.index],a.default_sort.id=a.id_list[a.default_sort.index],t.setStorage({key:"default_sort",data:{default_sort:a.default_sort}})},sub:function(){var e=/(^[\-0-9][0-9]*(.[0-9]+)?)$/,a=this;""!=a.permitPic?""!=a.name?""!=a.price?e.test(a.price)?""!=a.company?""!=a.stock?e.test(a.price)?""!=a.default_sort.sort_name?t.request({url:this.serveipd+"/api/merchantApi/addCommodity",method:"POST",data:{merchantId:a.merchantId,icon:a.permitPic,name:a.name,spec:a.norms_list_a.join(","),price:a.price,company:a.company,stock:a.stock,category_id:a.default_sort.id,content:a.content,isgroupbuy:a.change_v},success:function(e){e.data?t.showToast({title:"添加成功",duration:2e3}):t.showToast({title:"添加失败",duration:2e3})}}):t.showToast({title:"请选择属性",icon:"none",duration:2e3}):t.showToast({title:"库存数量输入有误，请重新输入",icon:"none",duration:2e3}):t.showToast({title:"请输入库存数量",icon:"none",duration:2e3}):t.showToast({title:"请输入商品单位",icon:"none",duration:2e3}):t.showToast({title:"商品单价输入有误，请重新输入",icon:"none",duration:2e3}):t.showToast({title:"请输入商品单价",icon:"none",duration:2e3}):t.showToast({title:"请输入商品名称",icon:"none",duration:2e3}):t.showToast({title:"请添加商品图片",icon:"none",duration:2e3})}}};e.default=a}).call(this,a("6e42")["default"])},5117:function(t,e,a){"use strict";a.r(e);var s=a("6bf4"),n=a("6a29");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("92d9");var o=a("2877"),r=Object(o["a"])(n["default"],s["a"],s["b"],!1,null,null,null);e["default"]=r.exports},"6a29":function(t,e,a){"use strict";a.r(e);var s=a("3e3f"),n=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,function(){return s[t]})}(i);e["default"]=n.a},"6bf4":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"navigation",style:{height:t.height}},[a("navigator",{staticClass:"left",attrs:{"open-type":"navigateBack","hover-class":"none"}},[a("image",{attrs:{src:"../../static/Merchan_registration/back.png",mode:""}})]),a("view",{staticClass:"title"},[t._v("商品添加")]),a("view",{staticClass:"sub right",attrs:{eventid:"15db93db-0"},on:{tap:function(e){t.sub()}}},[t._v("完成")])],1),a("view",{staticClass:"content",style:{paddingTop:t.height}},[a("view",{staticClass:"div add_img"},[a("label",[t._v("商品图片")]),a("image",{staticClass:"bg_img",attrs:{src:t.Licence,alt:""}}),a("image",{attrs:{src:"../../static/sptp.png",mode:"",eventid:"15db93db-1"},on:{tap:t.add_wares}})],1),a("view",{staticClass:"wares_infor"},[a("view",{staticClass:"div"},[a("label",[t._v("商品名称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"请输入商品名称",eventid:"15db93db-2"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})],1),a("view",{staticClass:"div norms_box",attrs:{eventid:"15db93db-3"},on:{tap:function(e){t.add_norms()}}},[a("label",[t._v("规格")]),""!=t.norms_list_a?a("view",{staticClass:"norms_label"},t._l(t.norms_list_a,function(e,s){return a("text",{key:s},[t._v(t._s(e))])})):a("view",{staticClass:"norms_title"},[a("text",[t._v("点击添加规格")])])],1),a("view",{staticClass:"div"},[a("label",[t._v("单价")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],attrs:{type:"number",placeholder:"请输入商品单价(元)",eventid:"15db93db-4"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})],1),a("view",{staticClass:"div"},[a("label",[t._v("单位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.company,expression:"company"}],attrs:{type:"text",placeholder:"请输入商品单位(碗,张,件)",eventid:"15db93db-5"},domProps:{value:t.company},on:{input:function(e){e.target.composing||(t.company=e.target.value)}}})],1),a("view",{staticClass:"div"},[a("label",[t._v("库存")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.stock,expression:"stock"}],attrs:{type:"number",placeholder:"请输入库存数量",eventid:"15db93db-6"},domProps:{value:t.stock},on:{input:function(e){e.target.composing||(t.stock=e.target.value)}}})],1),a("view",{staticClass:"div"},[a("label",[t._v("属性")]),a("picker",{staticClass:"norms_title",attrs:{mode:"selector",range:t.sort,value:t.default_sort.index,eventid:"15db93db-7"},on:{change:t.sort_list},model:{value:t.default_sort.sort_name,callback:function(e){t.default_sort.sort_name=e},expression:"default_sort.sort_name"}},[""==t.default_sort.sort_name?a("text",[t._v("点击选择属性")]):a("text",{staticStyle:{color:"#333"}},[t._v(t._s(t.default_sort.sort_name))])])],1)]),a("view",{staticClass:"wares_describe_infor"},[a("view",{staticClass:"div"},[t._v("详细描述")]),a("view",{staticClass:"describe"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{name:"",id:"",cols:"20",rows:"4",placeholder:"描述一下你的商品吧~",eventid:"15db93db-8"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})])]),a("view",{staticClass:"div group_buying"},[a("text",[t._v("是否团购商品")]),a("switch",{attrs:{checked:"",eventid:"15db93db-9"},on:{change:t.change}})])]),a("view",{staticClass:"mask",style:{display:t.tg}},[a("view",{staticClass:"norms"},[a("label",[t._v("请输入规格")]),a("view",{staticClass:"norms_text"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.norms,expression:"norms"}],attrs:{type:"text",placeholder:"如:微辣,加热,冰镇等",eventid:"15db93db-10"},domProps:{value:t.norms},on:{input:function(e){e.target.composing||(t.norms=e.target.value)}}}),a("text",{staticClass:"add_norms",attrs:{eventid:"15db93db-11"},on:{tap:function(e){t.add_norms_label()}}},[t._v("添加")])]),a("view",{staticClass:"norms_label"},t._l(t.norms_list,function(e,s){return a("text",{key:s},[t._v(t._s(e))])})),a("view",{staticClass:"btn"},[a("text",{staticClass:"cancel",attrs:{eventid:"15db93db-12"},on:{tap:function(e){t.cancel()}}},[t._v("取消")]),a("text",{staticClass:"determine",attrs:{eventid:"15db93db-13"},on:{tap:function(e){t.determine()}}},[t._v("确定")])])],1)])])},n=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n})},"92d9":function(t,e,a){"use strict";var s=a("ee17"),n=a.n(s);n.a},ce54:function(t,e,a){"use strict";a("b007");var s=i(a("b0ce")),n=i(a("5117"));function i(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(n.default))},ee17:function(t,e,a){}},[["ce54","common/runtime","common/vendor"]]]);